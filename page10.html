<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main_page.css">
    <title>Catalog</title>
</head>

<body>
    <div class="top center">
        <header class="header">
            <div class="header__buttons__left">
                <a class="header__button" href="https://developer.tekla.com/"><img src="image/Tekla-logo.svg.png" alt=""
                        width="100px"></a>
                
            </div>
            <div class="header__buttons__right">
                
                <a class="header__button hidemobile" href="main_page.html"><img src="image/Forma1(2).svg" alt=""></a>
                
            </div>
        </header>
        <div class="top-head">
            <h2 class="top-head__heading">TEKLA STRUCTURES - PLUGINS - How it works?</h2>
            
        </div>
    </div>

    <div class="filter-sort center">
        <details class="filter">
            <summary class="filter__summary"><span class="filter__heading hide_when_close">СОДЕРЖАНИЕ</span> <svg
                    class="filter__svg" width="15" height="10" viewBox="0 0 15 10" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M0.833333 10H4.16667C4.625 10 5 9.625 5 9.16667C5 8.70833 4.625 8.33333 4.16667 8.33333H0.833333C0.375 8.33333 0 8.70833 0 9.16667C0 9.625 0.375 10 0.833333 10ZM0 0.833333C0 1.29167 0.375 1.66667 0.833333 1.66667H14.1667C14.625 1.66667 15 1.29167 15 0.833333C15 0.375 14.625 0 14.1667 0H0.833333C0.375 0 0 0.375 0 0.833333ZM0.833333 5.83333H9.16667C9.625 5.83333 10 5.45833 10 5C10 4.54167 9.625 4.16667 9.16667 4.16667H0.833333C0.375 4.16667 0 4.54167 0 5C0 5.45833 0.375 5.83333 0.833333 5.83333Z"
                        fill="black" />
                </svg>
            </summary>
            <div class="filter__content">
                <details open class="filter__item">
                    <summary class="filter__head">ЧТО ТАКОЕ ПЛАГИН?</summary>
                    <div class="filter__link-box">
                        <a href="page01.html" class="filter__link">Плагины. Что это такое?</a>
                        <a href="page02.html" class="filter__link">Почему был выбран язык C#?</a>
                        <a href="page03.html" class="filter__link">Способы разработки графического интерфейса плагина</a>
                        <a href="page04.html" class="filter__link">Какие бывают плагины?</a>
                        <a href="page05.html" class="filter__link">Обязательные части плагина</a>
                    </div>

                </details>
                <details class="filter__item">
                    <summary class="filter__head">НАПИСАНИЕ ПЛАГИНА</summary>
                    <div class="filter__link-box">
                        <a href="page06.html" class="filter__link">Пространства имен</a>
                        <a href="page07.html" class="filter__link">Атрибуты</a>
                        <a href="page08.html" class="filter__link">Класс Input_Beam</a>
                        <a href="page09.html" class="filter__link">Метод DefineInput()</a>
                        <a href="page10.html" class="filter__link">Метод Run
                        </a>
                        <a href="page11.html" class="filter__link">Класс UI_Data</a>
                        <a href="page12.html" class="filter__link">Класс Preset</a>
                        <a href="page13.html" class="filter__link">Main_Panel</a>
                        <a href="page14.html" class="filter__link">Ui_Class_CheckBox</a>
                        <a href="page15.html" class="filter__link">TextBox</a>
                        <a href="page16.html" class="filter__link">OkApplyModifyGetOnOffCancel</a>
                        <a href="page17.html" class="filter__link">SaveLoad</a>
                        <a href="page18.html" class="filter__link">Метод GetValuesFromDialog()</a>
                        <a href="page19.html" class="filter__link">Метод SetValuesFromData</a>
                        <a href="page20.html" class="filter__link">Метод Main</a>
                    </div>

                </details>
                <details class="filter__item">
                    <summary class="filter__head">ТЕРМИНОЛОГИЯ</summary>
                    <div class="filter__link-box">
                        <a href="page_api.html" class="filter__link">Application programming interface(API)
                        </a>
                        <a href="page_tekla_api.html" class="filter__link">Tekla Open API</a>
                        <a href="page_language.html" class="filter__link">Язык С#</a>
                        <a href="page_termins.html" class="filter__link">Термины из языка C#</a>
                    </div>

                </details>
            </div>
        </details>

    </div>
    <div class="main_text center">
        <div class="main_text__text">
            <h1 class="main_text__heading">Метод Run</h1>
            <div class="main_text__description">
                <p>Сигнатура метода:
                </p>
                <li> возвращает void
                </li>
                <li> аргумент List<InputDefinition> 
                </li>
                <p>Переходим к переопределению метода Run. Внутри него используем try-catch, чтобы отловить возможные ошибки. 
                </p>
                <p>Вот краткий план, что именно необходимо сделать методу:
                </p>
                <li> получить атрибуты из пользовательского интерфейса(UI), используя метод GetValuesFromDialog
                </li>
                <li> извлечь данные, переданные через аргумент Input, используя метод GetInput и привести результат к массиву точек
                </li>
                <li> вызвать метод генерации балки - Create_Beam 
                </li>
                <li> назначить на созданный объект модели(плагин) атрибуты, которые были получены в пользовательском интерфейсе - SetValuesFromDialog
                </li>
                <li> обновить модель, принять изменения - Model.CommitChanges 
                </li>
                <img src="image/image03.jpg" alt="Run">
                <p>Рассмотрим каждый этап подробнее.
                </p>
                <p>В методе Run в первую очередь мы должны достать из аргумента метода Run те данные, которые мы в него вложили в методе DefineInput. Выходным типом данных в этом методе был List<InputDefinition> и именно его мы используем в качестве аргумента в методе Run, присвоив ему название Input. Мы берем этот аргумент и начинаем из него извлекать данные в переменную points. Input является индексированной коллекцией, но внутри нее может быть любой тип данных. В нашей коллекции содержится только один член, но их может быть любое количество. Мы обращаемся к этому элементу и чтобы мы могли им манипулировать дальше, мы применяем к нему метод GetInput (получить информацию,что находится внутри), в результате получем некий object, который необходимо привести к ArrayList. Возможно оставить элемент к таком виде, но для дальнейшего использования удобнее при помощи метода Cast привести его к строго типизорованной коллекции - массиву точек.  
                </p>
                <p>Отдельно создаем метод для отрисовки балки Create_Beam. В качестве аргумента используем params TSG.Point[] points.
                </p>
                <img src="image/image04.jpg" alt="Create_Beam">
                <p>Ключевое слово params означает, что мы должны ввести какой-то массив, но оно освобождает нас от необходимости в явном виде этот массив указывать, т.е. массив создается самим инструментом.
                </p>
                <p>Задаем Profile (сечение балки) и Material (малериал балки). То есть те значения, которые будут у балки по умолчанию, иначе балка не создастся. Всё это можно будет поменять через пользовательский интерфейс. Начальную и конечную точки мы указываем через аргументы конструктора (new TSM.Beam(points[0], points[1])) Также задаем цвет, который мы назначим в классе Ui_Data, за цвет в Tekla отвечает свойство Class. Цвета задаются числом и в интерфейсе мы их тоже видим числом, но в системе они прописываются текстом. Поэтому цвет нужно обязательно привести к типу String.
                </p>
                <p>Возвращаемся к методу Run и вызываем метод Create_Beam.
                </p>
                <p>Теперь мы вызываем метод SetValueFromDialog(который будет описан позднее).
                </p>
                <p>Используем метод CommitChanges, который фиксирует изменения, внесенные в базу данных модели на данный момент. Один коммит - это то, что пользователь может позже отменить с помощью команды undo. Коммит также запускает отображение измененной модели на видимых видах.
                </p>
            </div>
        </div>

    </div>

    <footer class="footer center">

        <section class="footer__copyrights">
            <p class="footer__copyright">&copy;&nbsp;2024</p>
            <div class="footer__social__icons">
                <a class="footer__social__icon" href="#"><img src="image/2.svg" alt=""></a>
                <a class="footer__social__icon" href="#"><img src="image/4.svg" alt=""></a>
                <a class="footer__social__icon" href="#"><img src="image/5.svg" alt=""></a>
                <a class="footer__social__icon" href="#"><img src="image/6.svg" alt=""></a>
            </div>
        </section>
    </footer>
</body>

</html>